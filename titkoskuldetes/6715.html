// üõë T√ñRT√âNETR√âSZEK 
const storyPages = [
    // Anna √©s Mark p√°rbesz√©de (√öJ TARTALOM)
    { type: 'text', content: `Nem volt egyszer≈± feladat.`, speaker: 'Anna', image: STABLE_IMAGE_URL },
    { type: 'text', content: `Mehet√ºnk a k√∂vetkez≈ë helysz√≠nre.`, speaker: 'Anna', image: STABLE_IMAGE_URL },
    
    // A p√≥k k√∂ve le√≠r√°sa (√öJ TARTALOM - Mark)
    { type: 'text', content: `A holdf√©nyben halv√°nyan derengett egy k≈ë, amely a f√∂ldb≈ël f√©lig kiemelkedve √°llt az √∫t sz√©l√©n.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `A k≈ëbe v√©sett sz√°m ‚Äì a f≈ëv√°rost√≥l val√≥ t√°vols√°g ‚Äì a k≈ë r√©gis√©ge ellen√©re meglep≈ëen √©lesen kivehet≈ë volt.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `√Åm a legt√∂bbsz√∂r m√©gsem l√°tta senki: a p√≥kok s≈±r≈±, vastag h√°l√≥kkal sz≈ëtt√©k be √∫jra √©s √∫jra, mintha sz√°nd√©kosan takart√°k volna el a sz√°mokat az arra j√°r√≥k el≈ël.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `A k√∂rny√©kbeliek ez√©rt is h√≠vt√°k csak √≠gy: ‚Äûa p√≥kok k√∂ve.‚Äù`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `Nem sz√°m√≠tott, hogy valaki letakar√≠totta, m√°snapra √∫jra vastag, ragacsos h√°l√≥kkal sz≈ëtt√©k k√∂rbe a p√≥kok.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `Mintha ≈ërizt√©k volna a k√∂vet.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `Mintha nem akart√°k volna, hogy b√°rki hozz√°f√©rjen.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `A legenda szerint a kilom√©terk≈ë nemcsak √∫tjelz≈ë volt.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `A 18. sz√°zadban a borosgazd√°k √©s keresked≈ëk ide rejtett√©k a k≈ë m√∂g√© az eladott √°ru ellen√©rt√©k√©t, hogy ne kelljen szem√©lyesen tal√°lkozni az elad√≥val √©s id≈ët sp√≥roljanak.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `A m√°sodik vil√°gh√°bor√∫ alatt √°ll√≠t√≥lag √ºzeneteket rejtettek a k≈ë m√∂g√©.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `√âs egy alkalommal egy k√ºl√∂n√∂s √ºvegcs√©t dugtak el oda.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `Senki sem tudta, hogy ott van, a m√∂g√∂tte l√©v≈ë h√°z mindig is eltakarta.`, speaker: 'Mark', image: STABLE_IMAGE_URL },
    { type: 'text', content: `De az√≥ta is a p√≥kok az√©rt sz≈ënek folyton h√°l√≥t k√∂r√©, mert ≈ëk is tudj√°k: a k≈ë titkot ≈ëriz.`, speaker: 'Mark', image: STABLE_IMAGE_URL }
];


let currentPartIndex = 0;
const CORRECT_PASSWORD = "2460";
const SUCCESS_LINK = "compass2.html";

// ... a k√≥d t√∂bbi r√©sze ...

function checkButton.addEventListener('click', () => {
    const enteredPassword = passwordInput.value.trim();

    if (enteredPassword === CORRECT_PASSWORD) {
        // V√ÅLTOZ√ÅS: √úzenet megjelen√≠t√©se a tov√°bbl√©p√©s el≈ëtt
        messageDisplay.textContent = 'K√≥d elfogadva! N√©zd meg a k√∂vetkez≈ë feladatot a k≈ë m√∂g√∂tt.';
        messageDisplay.style.color = '#00FF00';
        
        // Elrejti a r√©gi gombokat √©s megjelen√≠ti az √∫j √ºzenetet
        passwordContainer.classList.remove('visible');
        interactionContainer.style.display = 'none';

        // EXTRA sz√∂vegdoboz megjelen√≠t√©se
        const successMessageContainer = document.createElement('div');
        successMessageContainer.id = 'success-message-step';
        successMessageContainer.style.cssText = 'padding-top: 20px; text-align: center;';
        successMessageContainer.innerHTML = `
            <p style="font-size: 1.3em; color: #00ffff; font-weight: 700;">N√©zz be a k≈ë h√°tulja m√∂g√© √©s keress egy kis √ºvegcs√©t. Jegyezd fel az ott tal√°lt sz√°mk√≥dot!</p>
            <button id="final-next-button" class="page-button" style="margin-top: 20px; background-color: #00ffff; color: #1a1a1a; width: 100%;">Tov√°bb</button>
        `;

        // A `content-box` alj√°hoz adja hozz√° az √∫j tartalmat
        document.getElementById('content-box').appendChild(successMessageContainer);

        document.getElementById('final-next-button').addEventListener('click', () => {
            localStorage.removeItem('gameProgress');
            stopAllAudio();
            window.location.href = SUCCESS_LINK;
        });
        
    } else {
        messageDisplay.textContent = 'Helytelen jelsz√≥! Pr√≥b√°ld √∫jra.';
        messageDisplay.style.color = '#FF4500';
        passwordInput.value = '';
    }
});

<!doctype html>
<html lang="hu">
<head>
ย ย <meta charset="utf-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=10.0, orientation=portrait">ย
ย ย <title>Titkos รzenet โ Kรณdfejtรฉs</title>
ย ย <link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&display=swap" rel="stylesheet">
ย ย <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
ย ย <style>
ย ย ย ย /* Alapvetล reszet รฉs sรถtรฉt hรกttรฉr */
ย ย ย ย body {
ย ย ย ย ย ย margin: 0;
ย ย ย ย ย ย padding: 0;
ย ย ย ย ย ย font-family: 'Play', sans-serif;
ย ย ย ย ย ย /* FONTOS: Sรถtรฉt tรฉma beรกllรญtรกsa */
ย ย ย ย ย ย color: #e0e0e0;ย
ย ย ย ย ย ย background-color: #1a1a1a;ย
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย flex-direction: column;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย min-height: 100vh;
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย padding-bottom: 60px;ย
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* รJ: Fekvล tรกjolรกs tiltรกsa, csak a portrรฉ (รกllรณ) mรณd lรกthatรณ */
ย ย ย ย @media only screen and (orientation: landscape) {
ย ย ย ย ย ย body::after {
ย ย ย ย ย ย ย ย content: "Kรฉrlek, tartsd fรผggลlegesen a telefont!";
ย ย ย ย ย ย ย ย position: fixed;
ย ย ย ย ย ย ย ย top: 0;
ย ย ย ย ย ย ย ย left: 0;
ย ย ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย ย ย background-color: #1a1a1a;
ย ย ย ย ย ย ย ย color: #ff4500;
ย ย ย ย ย ย ย ย font-size: 2em;
ย ย ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย ย ย justify-content: center;
ย ย ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย ย ย z-index: 9999;
ย ย ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย }
ย ย ย ย ย ย body > *:not(style):not(script):not(.full-width-image-container) {
ย ย ย ย ย ย ย ย display: none !important;
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Teljes szรฉlessรฉgลฑ KรP (Hรกttรฉr) */
ย ย ย ย .full-width-image-container {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100vh;ย
ย ย ย ย ย ย overflow: hidden;
ย ย ย ย ย ย position: fixed;ย
ย ย ย ย ย ย top: 0;
ย ย ย ย ย ย left: 0;
ย ย ย ย ย ย z-index: 0;ย
ย ย ย ย }

ย ย ย ย .full-width-image-container img {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย /* JAVรTVA: cover, hogy kitรถltse a kontรฉnert (responsive hรกttรฉrkรฉp) */
ย ย ย ย ย ย object-fit: cover;ย
ย ย ย ย ย ย /* JAVรTVA: kรถzรฉpre pozicionรกlรกs */
ย ย ย ย ย ย object-position: center center;ย
ย ย ย ย }

ย ย ย ย /* Tartalom doboz - FIX ALULRA ZรRVA */
ย ย ย ย .content-box {
ย ย ย ย ย ย background-color: rgba(0, 0, 0, 0.7);ย
ย ย ย ย ย ย padding: 40px;ย
ย ย ย ย ย ย margin: 0;ย
ย ย ย ย ย ย border-radius: 10px 10px 0 0;ย
ย ย ย ย ย ย max-width: 800px;
ย ย ย ย ย ย width: calc(100% - 20px);
ย ย ย ย ย ย box-shadow: 0 0 25px rgba(138, 43, 226, 0.7);
ย ย ย ย ย ย border: 3px solid #8a2be2;
ย ย ย ย ย ย box-sizing: border-box;
ย ย ย ย ย ย position: fixed;ย
ย ย ย ย ย ย bottom: 50px;ย
ย ย ย ย ย ย left: 50%;
ย ย ย ย ย ย transform: translateX(-50%);ย
ย ย ย ย ย ย z-index: 10;
ย ย ย ย ย ย text-align: left;
ย ย ย ย ย ย min-height: 250px;ย
ย ย ย _C-4-B-E_ ย ย ย ย display: flex;ย
ย ย ย ย ย ย flex-direction: column;
ย ย ย ย ย ย justify-content: space-between;ย
ย ย ย ย ย ย opacity: 0;ย
ย ย ย ย ย ย transition: opacity 0.5s ease-in-out;
ย ย ย ย }

ย ย ย ย /* Tรถrtรฉnet szรถvege */
ย ย ย ย #story-text-display {
ย ย ย ย ย ย font-size: 1.3em;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย line-height: 1.6;
ย ย ย ย ย ย margin-bottom: 20px;
ย ย ย ย ย ย white-space: pre-wrap;ย
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Audio gombok... */
ย ย ย ย .audio-container {
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย margin-bottom: 15px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .audio-button {
ย ย ย ย ย ย padding: 12px 20px;ย
ย ย ย ย ย ย text-decoration: none;
ย ย ย ย ย ย color: #1a1a1a;
ย ย ย ย ย ย background-color: #00FFFF;ย
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย border-radius: 5px;
ย ย ย ย ย ย font-size: 1.1em;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย transition: background-color 0.3s;
ย ย ย ย ย ย box-shadow: 0 0 10px rgba(0, 255, 255, 0.4);
ย ย ย ย ย ย display: inline-flex;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย gap: 8px;
ย ย ย ย }

ย ย ย ย .audio-button:hover {
ย ย ย ย ย ย background-color: #00DDEE;
ย ย ย ย }

ย ย ย ย /* --- ALSร INTERAKCIรS SรV (a tรถrtรฉnet gombjai) --- */
ย ย ย ย .bottom-bar {
ย ย ย ย ย ย padding-top: 10px;
ย ย ย ย ย ย border-top: 1px dashed #8a2be2;
ย ย ย ย ย ย min-height: 48px;
ย ย ย ย ย ย width: 100%;
ย ย ย ย }

ย ย ย ย .interaction-container {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย justify-content: space-between;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย width: 100%;
ย ย ย ย }

ย ย ย ย .page-button {
ย ย ย ย ย ย padding: 12px 20px;ย
ย ย ย ย ย ย text-decoration: none;
ย ย ย ย ย ย color: #ffffff;
ย ย ย ย ย ย background-color: #8a2be2;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย border-radius: 5px;
ย ย ย ย ย ย font-size: 1.1em;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย transition: background-color 0.3s, transform 0.1s;
ย ย ย ย ย ย text-transform: uppercase;
ย ย ย ย ย ย box-shadow: 0 4px 10px rgba(138, 43, 226, 0.4);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .page-button:hover:not(:disabled) {
ย ย ย ย ย ย background-color: #7b1cd1;
ย ย ย ย ย ย transform: translateY(-1px);
ย ย ย ย }

ย ย ย ย .page-button:disabled {
ย ย ย ย ย ย background-color: #555555;
ย ย ย ย ย ย cursor: not-allowed;
ย ย ย ย ย ย box-shadow: none;
ย ย ย ย ย ย opacity: 0.6;
ย ย ย ย }

ย ย ย ย /* Jelszรณ kontรฉner */
ย ย ย ย #password-container {
ย ย ย ย ย ย display: none;
ย ย ย ย ย ย flex-direction: column;
ย ย ย ย ย _C-4-B-E_ ย gap: 15px;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย text-align: center;
ย ย ย ย }

ย ย ย ย #password-container.visible {
ย ย ย ย ย ย display: flex;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย #password-input {
ย ย ย ย ย ย padding: 12px;
ย ย ย ย ย ย border: 2px solid #8a2be2;
ย ย ย ย ย ย border-radius: 5px;
ย ย ย ย ย ย background-color: #2c2c2c;
ย ย ย ย ย ย color: #00ffff;
ย ย ย ย ย ย font-size: 1.2em;
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย font-family: 'Play', sans-serif;
ย ย ย _C-4-B-E_ ย ย ย margin-bottom: 5px;ย
ย ย ย ย }

ย ย ย ย /* A "Add meg a kรณdot" sor flexbe igazรญtva a kรฉrdลjellel */
ย ย ย ย #password-container p {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย justify-content: center;
ย ย ย ย ย ย gap: 10px;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .password-interaction {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย justify-content: space-between;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย gap: 10px;
ย ย ย ย ย ย width: 100%;
ย ย ย ย }

ย ย ย ย #check-password-button, #back-button-password {
ย ย ย ย ย ย padding: 12px 20px;ย
ย ย ย ย ย ย font-size: 1.1em;ย
ย ย ย ย }
ย ย ย ยย
ย ย ย ย #back-button-password {
ย ย ย ย ย ย color: #ffffff;
ย ย ย ย ย ย background-color: #8a2be2;ย
ย ย ย ย }
ย ย ย ยย
ย ย ย ย #check-password-button {
ย ย ย ย ย ย color: #ffffff;
ย ย ย ย ย ย background-color: #00ffff;
ย ย ย ย ย ย box-shadow: 0 4px 10px rgba(0, 255, 255, 0.4);ย
ย ย ย ย ย ย flex-grow: 1;ย
ย ย ย ย }
ย ย ย ยย
ย ย ย ย #check-password-button:hover {
ย ย ย ย ย ย background-color: #00ddee;
ย ย ย ย ย ย transform: translateY(-1px);ย
ย _C-4-B-E_ ย ย }

ย ย ย ย #message {
ย ย ย ย ย ย margin-top: 10px;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย color: #ff4500;
ย ย ย ย }

ย ย ย ย /* Avatar kรฉp */
ย ย ย ย .avatar-image {
ย ย ย ย ย ย position: absolute;
ย ย ย ย ย ย top: -50px;ย
ย ย ย ย ย ย left: -10px;ย
ย ย ย ย ย ย width: 70px;ย
ย ย ย ย ย ย height: 70px;ย
ย ย ย ย ย ย border-radius: 50%;ย
ย ย ย ย ย ย object-fit: cover;ย
ย ย ย ย ย ย z-index: 20;ย
ย ย ย ย ย ย display: block;ย
ย ย ย ย ย ย box-shadow: 0 0 8px rgba(0, 255, 255, 0.5);ย
ย ย ย ย ย ย transition: opacity 0.3s ease-in-out;ย
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* --- FIX ALSร MENรSOR --- */
ย ย ย ย .fixed-menu-bar {
ย ย ย ย ย ย position: fixed;
ย ย ย ย ย ย bottom: 0;
ย ย ย ย ย ย left: 0;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 50px;
ย ย ย ย ย ย background-color: #1a1a1a;
ย ย ย ย ย ย border-top: 2px solid #8a2be2;
ย ย ย ย ย ย z-index: 50;ย
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย justify-content: space-around;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย box-shadow: 0 -4px 15px rgba(138, 43, 226, 0.5);
ย ย ย ย }

ย ย ย ย .menu-button {
ย ย ย ย ย ย background: none;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย color: #ffffff;
ย ย ย ย ย ย font-size: 1.5em;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย padding: 5px 10px;
ย ย ย ย ย ย transition: color 0.3s;
ย ย ย ย }

ย ย ย ย .menu-button:hover {
ย ย ย ย ย ย color: #00ffff;
ย ย ย ย }

ย ย ย ย /* --- GALรRIA MODAL STรLUSOK --- */
ย ย ย ย #galleryModal {
ย ย ย ย ย ย display: none;ย
ย ย ย ย ย ย position: fixed;
ย ย ย ย ย ย z-index: 100;ย
ย ย ย ย ย ย left: 0;
ย ย ย ย ย ย top: 0;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย overflow-y: scroll;ย
ย ย ย ย ย ย background-color: rgba(0, 0, 0, 0.95);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* รJ: Fล galรฉria nรฉzet (bรฉlyegkรฉpek) */
ย ย ย ย #gallery-container {
ย ย ย ย ย ย display: grid;
ย ย ย ย ย ย grid-template-columns: 1fr 1fr;ย
ย ย ย ย ย ย gap: 10px;
ย ย ย ย ย ย padding: 15px;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย max-width: 800px;
ย ย ย ย ย ย margin: 0 auto;
ย ย _C-4-B-E_ ย ย ย ย box-sizing: border-box;
ย ย ย ย }

ย ย ย ย .gallery-thumbnail {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 150px;ย
ย ย ย ย ย ย overflow: hidden;
ย ย ย ย ย ย border: 2px solid #8a2be2;
ย ย ย ย ย ย border-radius: 5px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย box-shadow: 0 0 10px rgba(138, 43, 226, 0.4);
ย ย ย ย ย ย transition: transform 0.2s;
ย ย ย ย }

ย ย ย ย .gallery-thumbnail:hover {
ย ย ย ย ย ย transform: scale(1.03);
ย ย ย ย }

ย ย ย ย .gallery-thumbnail img {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย object-fit: cover;ย
ย ย ย ย ย ย display: block;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Teljes kรฉpernyลs modรกl kontรฉner a zoomolhatรณ kรฉpnek */
ย ย ย ย #full-image-display {
ย ย ย ย ย ย display: none;
ย ย ย ย ย ย position: fixed;
ย ย ย ย ย ย z-index: 101;
ย ย ย ย ย ย top: 0;
ย ย ย ย ย ย left: 0;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย background-color: rgba(0, 0, 0, 0.98);
ย ย ย ย ย ย overflow: auto;ย
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .full-image-content {
ย ย ย ย ย ย width: 100vw;ย
ย ย ย ย ย ย height: 100vh;
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย align-items: center;ย
ย ย ย ย ย ย justify-content: center;ย
ย ย ย ย }

ย ย ย ย #fullImageDisplay {
ย ย ย ย ย ย /* Kรฉp zoomolhatรณsรกg beรกllรญtรกsa */
ย ย ย ย ย ย display: block;
ย ย ย ย ย ย width: auto;ย
ย ย ย ย ย ย height: auto;
ย ย ย ย ย ย max-width: 100%;ย
ย ย ย ย ย ย max-height: 100%;
ย ย ย ย ย ยย
ย ย ย ย ย ย touch-action: pan-x pan-y;ย
ย ย ย ย ย ย cursor: move;
ย ย ย ย ย ย margin: auto;
ย ย ย ย }


ย ย ย ย .close-gallery {
ย ย ย ย ย ย position: absolute;
ย ย ย ย ย ย top: 15px;
ย ย ย ย ย ย right: 33px;
ย ย ย ย ย ย color: #f1f1f1;
ย ย ย ย ย ย font-size: 40px;
ย ย ย ย ย ย font-weight: bold;
ย ย ย ย ย ย transition: 0.3s;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย z-index: 110;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย .close-gallery:hover,
ย ย ย ย .close-gallery:focus {
ย ย ย ย ย ย color: #00ffff;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* A navigรกciรณs gombok eltรกvolรญtva a modรกlbรณl */
ย ย ย ย .gallery-nav {
ย ย ย ย ย ย display: none;ย
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* --- SรGร (HELP) MODAL STรLUSOK (รJ) --- */
ย ย ย ย #help-modal {
ย ย ย ย ย ย display: none;
ย ย ย ย ย ย position: fixed;
ย ย ย ย ย ย z-index: 200; /* Legfelรผl legyen */
ย ย ย ย ย ย left: 0;
ย ย ย ย ย ย top: 0;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย overflow: auto;
ย ย ย ย ย ย background-color: rgba(0, 0, 0, 0.9);
ย ย ย ย ย ย backdrop-filter: blur(5px);
ย ย ย ย }

ย ย ย ย .help-content {
ย ย ย ย ย ย background-color: #1a1a1a;
ย ย ย ย ย ย margin: 30% auto; /* Kรถzรฉpre igazรญtรกs */
ย ย ย ย ย ย padding: 30px;
ย ย ย ย ย ย border: 3px solid #00ffff;
ย ย ย ย ย ย border-radius: 10px;
ย ย ย ย ย ย width: 80%;
ย ย ย ย ย ย max-width: 400px;
ย ย ย ย ย ย box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
ย ย ย ย ย ย text-align: center;
ย ย ย ย }

ย ย ย ย #help-text-display {
ย ย ย ย ย ย font-size: 1.2em;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย color: #e0e0e0;
ย ย ย ย ย ย margin-bottom: 25px;
ย ย ย ย ย ย min-height: 80px;
}

ย ย ย ย #help-next-button, #help-close-button {
ย ย ย ย ย ย /* รltalรกnos stรญlus a sรบgรณ gomboknak */
ย ย ย ย ย ย padding: 10px 25px;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย border-radius: 5px;
ย ย ย ย ย ย font-size: 1.1em;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย transition: background-color 0.3s;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย #help-next-button {
ย ย ย ย ย ย background-color: #00ffff;
ย ย ย ย ย ย color: #1a1a1a;
ย ย ย ย }

ย ย ย ย #help-next-button:hover {
ย ย ย ย ย ย background-color: #00ddee;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย #help-close-button:hover {
ย ย ย ย ย ย background-color: #777777 !important;
ย ย ย ย }

ย ย ย ย /* Sรบgรณ ikon a kรณdbevitelhez */
ย ย ย ย .help-icon {
ย ย ย ย ย ย background: none;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย color: #00ffff;
ย ย ย ย ย ย font-size: 1.5em;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย transition: color 0.3s;
ย ย ย ย ย ย line-height: 0; /* Megakadรกlyozza, hogy megnyomja a kรถrnyezล szรถveg sortรกvolsรกgรกt */
ย ย ย ย }
ย ย </style>
</head>
<body oncontextmenu="return false;">ย
ย ย <div class="full-width-image-container">
ย ย ย ย ย ย ย ย <img id="story-image" src="Img/1757454120.jpg" alt="Titokzatos jelenet">
ย ย </div>

ย ย <div class="content-box" id="content-box">
ย ย ย ย <img id="avatar-img" class="avatar-image" src="https://github.com/treasurehuntsites/treasurehuntsites.github.io/blob/main/Img/1740218605.png?raw=true" alt="Szereplล avatar">
ย ย ย ยย
ย ย ย ย <p id="story-text-display"></p>
ย ย ย ยย
ย ย ย ย <div id="audio-container-1" class="audio-container" style="display:none;">
ย ย ย ย ย ย ย<button id="play-audio-button-1" class="audio-button">โถ๏ธ Lejรกtszรกs (1)</button>
ย ย ย ย </div>
ย ย ย ย <div id="audio-container-2" class="audio-container" style="display:none;">
ย ย ย ย ย ย ย<button id="play-audio-button-2" class="audio-button">โถ๏ธ Lejรกtszรกs (2)</button>
ย ย ย ย </div>


ย ย ย ย <div class="bottom-bar">
ย ย ย ย ย ย <div class="interaction-container" id="interaction-container">
ย ย ย ย ย ย ย ย <button id="prev-page-button" class="page-button" disabled>
ย ย ย ย ย ย ย ย ย ย Vissza
ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย <button id="next-page-button" class="page-button">
ย ย ย ย ย ย ย ย ย ย Folytatรกs
ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div id="password-container">
ย ย ย ย ย ย ย ย <p>
ย ย ย ย ย ย ย ย ย ย Add meg a kรณdot:
ย ย ย ย ย ย ย ย ย ย <button id="help-button" class="help-icon" title="Segรญtsรฉg">
ย ย ย ย ย ย ย ย ย ย ย ย <i class="fa-solid fa-circle-question"></i>
ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย </p>
ย ย ย ย ย ย ย ย <input type="password" id="password-input" maxlength="4">
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย <div class="password-interaction">
ย ย ย ย ย ย ย ย ย ย <button id="back-button-password" class="page-button">
ย ย ย ย ย ย ย ย ย ย ย ย Vissza
ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย ย ย <button id="check-password-button" class="page-button">
ย ย ย ย ย ย ย ย ย ย ย ย ELLENลRZรS
ย ย ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <p id="message"></p>
ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย </div>
ย ยย
ย ย <div class="fixed-menu-bar">
ย ย ย ย <button id="map-button" class="menu-button" title="Tรฉrkรฉp">
ย ย ย ย ย ย <i class="fa-solid fa-map-location-dot"></i>
ย ย ย ย </button>
ย ย ย ยย
ย ย ย ย <button id="image-button" class="menu-button" title="Kรฉpgalรฉria">
ย ย ย ย ย ย <i class="fa-solid fa-image"></i>
ย ย ย ย </button>
ย ย </div>
ย ยย
ย ย <div id="galleryModal">
ย ย ย <span class="close-gallery" onclick="history.back();">ร</span>
ย ย ย <div id="gallery-container">
ย ย ย ย ย ย </div>
ย ย </div>
ย ยย
ย ย <div id="full-image-display">
ย ย ย ย <div class="full-image-content">
ย ย ย ย ย ย <img id="fullImageDisplay" src="" alt="Nagyรญtott kรฉp" />
ย ย ย ย </div>
ย ย ย ย <span class="close-gallery" style="z-index: 120;" onclick="history.back();">ร</span>
ย ย </div>
ย ยย
ย ย <div id="help-modal">
ย ย ย ย <div class="help-content">
ย ย ย ย ย ย <p id="help-text-display"></p>
ย ย ย ย ย ย <div style="display: flex; justify-content: space-between; gap: 10px;">
ย ย ย ย ย ย ย ย <button id="help-close-button" class="page-button" style="flex-grow: 1; background-color: #555555; color: #ffffff;">Bezรกrรกs</button>
ย ย ย ย ย ย ย ย <button id="help-next-button" class="page-button" style="flex-grow: 1; background-color: #00ffff; color: #1a1a1a;">Tovรกbb</button>
ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย </div>

ย ยs
ย ย <audio id="story-audio-1" src="https://raw.githubusercontent.com/treasurehuntsites/treasurehuntsites.github.io/main/media/Ugynokok1.mp3" preload="auto"></audio>
ย ย <audio id="story-audio-2" src="https://raw.githubusercontent.com/treasurehuntsites/treasurehuntsites.github.io/main/media/Ugynokok2.mp3" preload="auto"></audio>

ย ย <script>
ย ย ย ย // KรP URL-ek
ย ย ย ย // JAVรTVA: A hรกttรฉrkรฉp รบtvonala a kรฉrรฉsnek megfelelลen
ย ย ย ย const STABLE_IMAGE_URL = "Img/1757454120.jpg";ย
ย ย ย ย const MARK_AVATAR_URL = "https://github.com/treasurehuntsites/treasurehuntsites.github.io/blob/main/Img/1740218605.png?raw=true";
ย ย ย ย const ANNA_AVATAR_URL = "https://content.actionbound.com/user/5d77f26bdf17445d808bcb28/image/1740219075.png";
ย ย ย ยย
ย ย ย ย // FRISSรTVE: GALรRIA KรPEK LISTรJA (Csak az รบj kรฉp)
ย ย ย ย const galleryImages = [
ย ย ย ย ย ย { url: "Img/1757454120.jpg", title: "Omladozรณ hรกz" }
ย ย ย ย ];
ย ย ย ย let currentGalleryIndex = 0;


ย ย ย ย // ๐ FRISSรTVE: TรRTรNETRรSZEK (Minden elem egy mondat, a kรฉrรฉs alapjรกn)ย
ย ย ย ย const storyPages = [
ย ย ย ย ย ย { type: 'text', content: 'Ezt hallgasd Mรกrk!', speaker: 'Anna', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Budafok belvรกrosรกban, a Kossuth Lajos utcรกban รกll egy rรฉgi, omladozรณ hรกz.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A jรกrda ezen a szakaszon olyan keskeny, hogy kรฉt ember alig fรฉr el egymรกs mellett, a hรกzak falai pedig szinte รถsszeรฉrnek.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Az egyik รฉpรผlet homlokzata mรกllik, a vakolat foltokban pereg, รฉs az รถregek รบgy mondjรกk: โez a hรกz mindig rejtegetett valamit.โ', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A legenda a mรบlt szรกzad kรถzepรฉre nyรบlik vissza.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Az omladozรณ hรกz falรกba, a repedรฉsek kรถzรฉ, egy rejtett รผregbe dugtak egy tรฉrkรฉpet.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Nem hรฉtkรถznapi tรฉrkรฉp volt ez โ hanem egy jรกtรฉk kincses tรฉrkรฉpnek รกlcรกzott rajz, amely รกllรญtรณlag a budafoki pincerendszer elfeledett bejรกratait รกbrรกzolta.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A jelek azonban nem egyszerลฑ utcanevek vagy irรกnyok voltak: szimbรณlumok, szรกmok รฉs betลฑk sorozata, mintha valami titkosรญrรกst rejtettek volna el rajta.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A tรถrtรฉnet szerint a tรฉrkรฉpet eredetileg egy nรฉmet tiszt hagyta hรกtra a mรกsodik vilรกghรกborรบ vรฉgรฉn.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A pincerendszerben fegyverraktรกrat, rรกdiรณรกllomรกst รฉs rejtekhelyeket alakรญtottak ki, s a tรฉrkรฉp mutatta volna, hol vannak a bejรกratok.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Amikor a szovjetek megรฉrkeztek, a tiszt elrejtette a falban, hogy senki se talรกljon rรก.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Az omladozรณ hรกz kรฉsลbb bรฉrhรกzzรก vรกlt.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A kรถrnyezล lakรณk gyakran panaszkodtak furcsa zajokra รฉjjel: mintha valaki a fal mรถgรผl kapargatna, vagy halkan morzejeleket kopogna.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Egy idลs lakรณ mesรฉlte, hogy gyerekkorรกban egyszer lรกtta: a szomszรฉd hรกz รกrnyรฉkรกbรณl egy fรฉrfi kilรฉpett az รฉjszakรกba, megรกllt a fal elลtt, รฉs egy krรฉtajellel megjelรถlte az egyik tรฉglรกt.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Reggelre a jel eltลฑnt.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Az รฉvek mรบltรกval a hรกz รผresen maradt, รฉs a jรกrda mellett mindmรกig ott รกll: szลฑk, dohos, a falai kรถzรถtt szorosan รถsszesimulva a szomszรฉdos borรกszati technikummal.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Senki nem tudja, lรฉtezik-e mรฉg a tรฉrkรฉp a falban.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Egyesek szerint a helyi gyerekek egy rรฉsze mรกr megtalรกlta, de nem tudta megfejteni a kรณdot.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Mรกsok azt mondjรกk, a tรฉrkรฉp valรณjรกban nem Budafok pincรฉihez vezet, hanem egy rejtett รผzenethez: nevekhez, amelyek egykor kรฉmek vagy besรบgรณk voltak, รฉs amelyek sorsa ma is titok.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'รs hogy mi az igazsรกg?', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A hรกz valรณban omladozik.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A jรกrda tรฉnyleg szลฑk.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A falak kรถzรถtti szorossรกg valรณsรกg.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A pincerendszer pedig ott van Budafok alatt, kilomรฉtereken รกt hรบzรณdva.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'De hogy a tรฉrkรฉp valรณban ott van-e a fal mรฉlyรฉn, รฉs vajon kรณd rejtลzik-e rajta?', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Ezt senki sem tudja biztosan.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Csak annyit, hogy minden generรกciรณban akad valaki, aki รบjra megprรณbรกlja megtalรกlni.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Nรฉzd csak rรกโฆ olyan, mintha bรกrmelyik pillanatban รถsszeomlana.', speaker: 'Anna', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'รs mรฉgis, valamiรฉrt mindenki azt suttogja, hogy ez a fal rejteget valamit.', speaker: 'Anna', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Egy tรฉrkรฉpet.', speaker: 'Mark', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Tudom.', speaker: 'Mark', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Egy kรณdot, ami a pincerendszerhez vezet.', speaker: 'Mark', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'De van itt mรฉg valami, amit kevesen emlegetnek.', speaker: 'Mark', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Hallgatlak.', speaker: 'Anna', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A legenda szerint nemcsak a tรฉrkรฉpet rejtettรฉk el a falban.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'รllรญtรณlag az 1800-as รฉvekben, amikor a kรถrnyรฉket mรฉg rรณmai kori leletek utรกn kutattรกk, talรกltak nรฉhรกny ลsi pรฉnzรฉrmรฉt.', speaker: 'Narrator', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Nem aranyak voltak, inkรกbb bronz sestertiusok.', speaker: 'Mark', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Azt beszรฉlik, egy rรฉgisรฉgkereskedล elrejtette ลket valahol itt, mert fรฉlt, hogy elveszik tลle.', speaker: 'Mark', image: STABLE_IMAGE_URL },
{ type: 'text', content: 'Tehรกt azt mondod, a hรกz falรกban egy tรฉrkรฉp van, a tรฉrkรฉp kรณdot rejt, รฉs a kรณd talรกn nemcsak pincรฉkhez vezet, hanem ezekhez aโฆ rรณmai pรฉnzekhez is?', speaker: 'Anna', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Pontosan.', speaker: 'Mark', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Gondolj bele: Budafok alatt tรถbb ezer รฉves nyomok hรบzรณdnak.', speaker: 'Mark', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'A borospincรฉk csak a modern rรฉteg.', speaker: 'Mark', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'De a Duna partja mindig is forgalmas volt.', speaker: 'Mark', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Ha tรฉnyleg maradt itt rรณmai pรฉnz, az egy jelโฆ egy hรญd a mรบlt รฉs a jelen kรถzรถtt.', speaker: 'Mark', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Gyerรผnk, nรฉzzรผnk kรถrรผl, hรกtha talรกlunk valamit!', speaker: 'Anna', image: STABLE_IMAGE_URL },
ย ย ย ย ย ย { type: 'text', content: 'Lehet, hogy ezeknek a mintรกknak itt hasznรกt vesszรผk?', speaker: 'Anna', image: STABLE_IMAGE_URL }
ย ย ย ย ];


ย ย ย ย let currentPartIndex = 0;
ย ย ย ย const CORRECT_PASSWORD = "1935";ย
ย ย ย ย const SUCCESS_LINK = "compass3a.html";ย
ย ย ย ยย
ย ย ย ย // ๐ MรDOSรTOTT: SEGรTSรG ADATOK รS รLLAPOT
ย ย ย ย const HELP_MESSAGES = [
ย ย ย ย ย ย "A szobor hรกtuljรกn keresgรฉlj",
ย ย ย ย ย ย "A segรญtsรฉgnek รกra van. Vigyรกzz , mert ha nem รฉrsz el 50 pontot a jรกtรฉk vรฉgรฉig, nem tudod a jรกtรฉkot befejezni. A kรณd: 1935"
ย ย ย ย ];
ย ย ย ย let currentHelpIndex = 0;
ย ย ย ยย
ย ย ย ย // DOM elemek
ย ย ย ย const contentBox = document.getElementById('content-box');
ย ย ย ย const storyDisplay = document.getElementById('story-text-display');
ย ย ย ย const nextButton = document.getElementById('next-page-button');
ย ย ย ย const prevButton = document.getElementById('prev-page-button');
ย ย ย ย const interactionContainer = document.getElementById('interaction-container');ย
ย ย ย ย const passwordContainer = document.getElementById('password-container');ย
ย ย ย ย const backButtonPassword = document.getElementById('back-button-password');ย

ย ย ย ย const passwordInput = document.getElementById('password-input');
ย ย ย ย const checkButton = document.getElementById('check-password-button');
ย ย ย ย const messageDisplay = document.getElementById('message');
ย ย ย ย const storyImage = document.getElementById('story-image');ย
ย ย ย ยย
ย ย ย ย const storyAudio1 = document.getElementById('story-audio-1');
ย ย ย ย const playAudioButton1 = document.getElementById('play-audio-button-1');
ย ย ย ย const audioContainer1 = document.getElementById('audio-container-1');
ย ย ย ยย
ย ย ย ย const storyAudio2 = document.getElementById('story-audio-2');
ย ย ย ย const playAudioButton2 = document.getElementById('play-audio-button-2');
ย ย ย ยย
ย ย ย ย const audioContainer2 = document.getElementById('audio-container-2');ย
ย ย ย ยย
ย ย ย ย const avatarImg = document.getElementById('avatar-img');
ย ย ย ยย
ย ย ย ย const imageButton = document.getElementById('image-button');
ย ย ย ย const mapButton = document.getElementById('map-button');ย

ย ย ย ย // GALรRIA DOM elemek
ย ย ย ย const galleryModal = document.getElementById('galleryModal');
ย ย ย ย const galleryContainer = document.getElementById('gallery-container');
ย ย ย ยย
ย ย ย ย // Nagyรญtott kรฉphez tartozรณ elemek
ย ย ย ย const fullImageDisplayModal = document.getElementById('full-image-display');
ย ย ย ย const fullImageDisplay = document.getElementById('fullImageDisplay');
ย ย ย ยย
ย ย ย ย // ๐ MรDOSรTOTT: Sรบgรณ DOM elemek
ย ย ย ย const helpButton = document.getElementById('help-button');
ย ย ย ย const helpModal = document.getElementById('help-modal');
ย ย ย ย const helpTextDisplay = document.getElementById('help-text-display');
ย ย ย ย const helpNextButton = document.getElementById('help-next-button');
ย ย ย ย const helpCloseButton = document.getElementById('help-close-button'); // รJ

ย ย ย ย // --- Segรฉd FรGGVรNYEK ---

ย ย ย ย function saveProgress() {
ย ย ย ย ย ย localStorage.setItem('gameProgress', currentPartIndex);
ย ย ย ย }

ย ย ย ย function loadProgress() {
ย ย ย ย ย ย const savedIndex = localStorage.getItem('gameProgress');
ย ย ย ย ย ย if (savedIndex !== null) {
ย ย ย ย ย ย ย ย currentPartIndex = Math.min(parseInt(savedIndex), storyPages.length);ย
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย currentPartIndex = 0;
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ยย
ย ย ย ย function stopAllAudio() {
ย ย ย ย ย ย ยstoryAudio1.pause();
ย ย ย ย ย ย ยstoryAudio1.currentTime = 0;
ย ย ย ย ย ย ยplayAudioButton1.innerHTML = "โถ๏ธ Lejรกtszรกs (1)";
ย ย ย ย ย ย ย
ย ย ย ย ย ย ยstoryAudio2.pause();
ย ย ย ย ย ย ยstoryAudio2.currentTime = 0;
ย ย ย ย ย ย ยplayAudioButton2.innerHTML = "โถ๏ธ Lejรกtszรกs (2)";
ย ย ย ย }

ย ย ย ย function toggleAudio(audioElement, buttonElement, buttonText) {
ย ย ย ย ย ย if (audioElement.paused) {
ย ย ย ย ย ย ย ย stopAllAudio();ย
ย ย ย ย ย ย ย ย audioElement.play().catch(error => {
ย ย ย ย ย ย ย ย ย ย console.error('Autoplay failed, user interaction needed.', error);
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย buttonElement.innerHTML = `โธ๏ธ Szรผnet (${buttonText})`;
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย audioElement.pause();
ย ย ย ย ย ย ย ย buttonElement.innerHTML = `โถ๏ธ Lejรกtszรกs (${buttonText})`;
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย // GALรRIA FUNKCIรK (vรกltozatlan)
ย ย ย ย function populateGallery() {
ย ย ย ย ย ย galleryContainer.innerHTML = '';ย
ย ย ย ย ย ย galleryImages.forEach((image, index) => {
ย ย ย ย ย ย ย ย const thumbnailDiv = document.createElement('div');
ย ย ย ย ย ย ย ย thumbnailDiv.className = 'gallery-thumbnail';
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย const img = document.createElement('img');
ย ย ย ย ย ย ย ย img.src = image.url;
ย ย ย ย ย ย ย ย img.alt = image.title;
ย ย ย ย ย ย ย ย img.dataset.index = index;
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย thumbnailDiv.onclick = () => openFullImage(image.url);
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย thumbnailDiv.appendChild(img);
ย ย ย ย ย ย ย ย galleryContainer.appendChild(thumbnailDiv);
ย ย ย ย ย ย });
ย ย ย ย }
ย ย ย ยย
ย ย ย ย function openFullImage(imageUrl) {
ย ย ย ย ย ย fullImageDisplay.src = imageUrl;
ย ย ย ย ย ย fullImageDisplayModal.style.display = 'block';
ย ย ย ย ย ย galleryModal.style.display = 'none';ย
ย ย ย ย ย ย history.pushState(null, null, '#full-image');
ย ย ย ย }
ย ย ย ยย
ย _C-4-B-E_ ย ย function closeFullImage() {
ย ย ย ย ย ย fullImageDisplayModal.style.display = 'none';
ย ย ย ย }

ย ย ย ย function openGallery() {
ย ย ย ย ย ย populateGallery();ย
ย ย ย ย ย ย galleryModal.style.display = "block";
ย ย ย ย ย ย history.pushState(null, null, '#gallery');
ย ย ย ย }

ย ย ย ย function closeGallery() {
ย ย ย ย ย ย galleryModal.style.display = "none";
ย ย ย ย ย ย fullImageDisplayModal.style.display = 'none';ย
ย ย ย ย }

ย ย ย ย // --- SรGร FUNKCIรK (MรDOSรTVA) ---

ย ย ย ย function closeHelpModal() {
ย ย ย ย ย ย helpModal.style.display = 'none';
ย ย ย ย }

ย ย ย ย function showHelpMessage() {
ย ย ย ย ย ย if (currentHelpIndex < HELP_MESSAGES.length) {
ย ย ย ย ย ย ย ย helpTextDisplay.textContent = HELP_MESSAGES[currentHelpIndex];
ย ย ย ย ย ย ย ย helpModal.style.display = 'block';
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย // Gombok lรกthatรณsรกga รฉs felirata
ย ย ย ย ย ย ย ย if (currentHelpIndex === HELP_MESSAGES.length - 1) {
ย ย ย ย ย ย ย ย ย ย helpNextButton.textContent = 'รrtem';
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย helpNextButton.textContent = 'Tovรกbb';
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย // Ha elfogyott a segรญtsรฉg, csak zรกrjuk be a modรกlt
ย ย ย ย ย ย ย ย closeHelpModal();
ย ย ย ย ย ย ย ย currentHelpIndex = HELP_MESSAGES.length - 1; // Maradjon az utolsรณ indexen
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย function nextHelpStep() {
ย ย ย ย ย ย if (currentHelpIndex < HELP_MESSAGES.length - 1) {
ย ย ย ย ย ย ย ย currentHelpIndex++;
ย ย ย ย ย ย ย ย showHelpMessage();
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย // Zรกrรกs, ha az utolsรณ segรญtsรฉg is megvolt (az "รrtem" gomb funkciรณja)
ย ย ย ย ย ย ย ย closeHelpModal();
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย // MรDOSรTVA: Esemรฉnykezelล a bรถngรฉszล Vissza gombjรกra (Modรกlok zรกrรกsa)
ย ย ย ย window.addEventListener('popstate', function(event) {
ย ย ย ย ย ย if (fullImageDisplayModal.style.display === 'block') {
ย ย ย ย ย ย ย ย closeFullImage();
ย ย ย ย ย ย ย ย history.pushState(null, null, '#gallery');ย
ย ย ย ย ย ย } else if (galleryModal.style.display === 'block') {
ย ย ย ย ย ย ย ย closeGallery();
ย ย ย ย ย ย ย ย history.pushState(null, null, window.location.pathname + window.location.search);
ciรณ ย ย ย }
ย ย ย ย });
ย ย ย ยย
ย ย ย ย // --- TรRTรNET/INTERAKCIร FUNKCIรK (vรกltozatlan) ---

ย ย ย ย function updateButtons() {
ย ย ย ย ย ย stopAllAudio();ย

ย ย ย ย ย ย if (currentPartIndex < storyPages.length) {
ย ย ย ย ย ย ย ย // Normรกl lapozรณ mรณdย
ย ย ย ย ย ย ย ย interactionContainer.style.display = 'flex';
ย ย ย ย ย ย ย ย passwordContainer.classList.remove('visible');
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย prevButton.disabled = currentPartIndex === 0;
ย ย ย ย ย ย ย ย nextButton.textContent = 'Folytatรกs';
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย // Kรณd kรฉrรฉs mรณdย
ย ย ย ย ย ย ย ย interactionContainer.style.display = 'none';
ย ย ย ย ย ย ย ย passwordContainer.classList.add('visible');
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย function updateAvatar(pageIndex) {
ย ย ย ย ย ย const speakerType = pageIndex < storyPages.length ? storyPages[pageIndex].speaker : 'Narrator';
ย ย ย ย ย ยย
ย ย ย ย ย ย if (speakerType === 'Anna') {
ย ย ย ย ย ย ย ย avatarImg.src = ANNA_AVATAR_URL;
ย ย ย ย ย ย ย ย avatarImg.alt = 'Anna avatar';
ย ย ย ย ย ย ย ย avatarImg.style.opacity = 1;
ย ย ย ย ย ย } else if (speakerType === 'Mark') {
ย ย ย ย ย ย ย ย avatarImg.src = MARK_AVATAR_URL;
ย ย ย ย ย ย ย ย avatarImg.alt = 'Mรกrk avatar';
ย ย ย ย ย ย ย ย avatarImg.style.opacity = 1;
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย // Narrator vagy kรณdbevitel: lรกthatatlan avatar
ย ย ย ย ย ย ย ย avatarImg.src = MARK_AVATAR_URL;ย
ย ย ย ย ย ย ย ย avatarImg.alt = 'Szereplล avatar';
ย ย ย ย ย ย ย ย avatarImg.style.opacity = 0;ย
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย function showStoryPart() {
ย ย ย ย ย ย messageDisplay.textContent = '';ย
ย ย ย ย ย ย contentBox.style.opacity = 0;

ย ย ย ย ย ย setTimeout(() => {
ย ย ย ย ย ย ย ย audioContainer1.style.display = 'none';
ย ย ย ย ย ย ย ย audioContainer2.style.display = 'none';
ย ย ย ย ย ย ย ย storyDisplay.innerHTML = '';ย

ย ย ย ย ย ย ย ย if (currentPartIndex < storyPages.length) {
ย ย ย ย ย ย ย ย ย ย const currentPage = storyPages[currentPartIndex];
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย updateAvatar(currentPartIndex);ย
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย if (currentPage.type === 'text' || currentPage.type === 'audio') {
ย ย ย ย ย ย ย ย ย ย ย ย storyDisplay.innerHTML = currentPage.content;
ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย if (currentPage.type === 'audio') {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย if (currentPage.audioId === 1) {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย audioContainer1.style.display = 'block';
ย ย ย ย ย ย ย ย ย ย ย ย ย ย } else if (currentPage.audioId === 2) {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย audioContainer2.style.display = 'block';
s ย ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย storyImage.src = currentPage.image || STABLE_IMAGE_URL;ย
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย // Kรณd bevitelnรฉl
ย ย ย ย ย ย ย ย ย ย updateAvatar(currentPartIndex);
ย ย ย ย ย ย ย ย ย ย storyDisplay.innerHTML = 'Add meg a kรณdot!';
origin ย ย ย ย ย }

ย ย ย ย ย ย ย ย contentBox.style.opacity = 1;
ย ย ย ย ย ย ย ย updateButtons();
ย ย ย ย ย ย }, 500);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย // --- ESEMรNYKEZELลK ---
ย ย ย ยย
ย ย ย ย document.querySelector('#galleryModal .close-gallery').onclick = () => {
ย ย ย ย ย ย ยhistory.back();ย
ย ย ย ย };
ย ย ย ยย
ย ย ย ย document.querySelector('#full-image-display .close-gallery').onclick = () => {
ย ย ย ย ย ย ยhistory.back();ย
ย ย ย ย };

ย ย ย ย nextButton.addEventListener('click', () => {
ย ย ย ย ย ย currentPartIndex++;
ย ย ย ย ย ย saveProgress();
ย ย ย ย ย ย showStoryPart();
ย ย ย ย });

ย ย ย ย prevButton.addEventListener('click', () => {
ย ย ย ย ย ย if (currentPartIndex > 0) {
ย ย ย ย ย ย ย ย currentPartIndex--;
ย ย ย ย ย ย ย ย saveProgress();
ย ย ย ย ย ย ย ย showStoryPart();
A ย ย ย ย ย }
ย ย ย ย });
ย ย ย ยย
ย ย ย ย backButtonPassword.addEventListener('click', () => {
ย ย ย ย ย ย currentPartIndex = storyPages.length - 1;ย
ย ย ย ย ย ย saveProgress();
ย ย ย ย ย ย showStoryPart();
ย ย ย ย });

ย ย ย ย checkButton.addEventListener('click', () => {
ย ย ย ย ย ย const enteredPassword = passwordInput.value.trim();

ย ย ย ย ย ย if (enteredPassword === CORRECT_PASSWORD) {
ย ย ย ย ย ย ย ย messageDisplay.textContent = 'Kรณd elfogadva! Tovรกbb lรฉpรฉs...';
ย ย ย ย ย ย ย ย messageDisplay.style.color = '#00FF00';
ย ย ย ย ย ย ย ย localStorage.removeItem('gameProgress');ย
ย ย ย ย ย ย ย ย stopAllAudio();
ย ย ย ย ย ย ย ย setTimeout(() => {
ย ย ย ย ย ย ย ย ย ย window.location.href = SUCCESS_LINK;
ย ย ย ย ย ย ย ย }, 1000);
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย messageDisplay.textContent = 'Helytelen jelszรณ! Prรณbรกld รบjra.';
ย ย ย ย ย ย ย ย messageDisplay.style.color = '#FF4500';
ย ย ย ย ย ย ย ย passwordInput.value = '';
ย ย ย ย ย ย }
ย ย ย ย });

ย ย ย ย passwordInput.addEventListener('keypress', (e) => {
ย ย ย ย ย ย if (e.key === 'Enter') {
ย ย ย ย ย ย ย ย checkButton.click();ย
ย ย ย ย ย ย }
ย ย ย ย });
ย ย ย ยย
ย ย ย ย playAudioButton1.addEventListener('click', () => toggleAudio(storyAudio1, playAudioButton1, '1'));
ย ย ย ย playAudioButton2.addEventListener('click', () => toggleAudio(storyAudio2, playAudioButton2, '2'));

ย ย ย ยย
ย ย ย ย // 1. Kรฉpgalรฉria menรผ gomb esemรฉnykezelลje
ย ย ย ย imageButton.addEventListener('click', openGallery);
ย ย ย ยย
ย ย ย ย // 2. Tรฉrkรฉp menรผ gomb esemรฉnykezelลje
ย ย ย ย mapButton.addEventListener('click', () => {
ย ย ย ย ย ย window.open('https://www.google.com/maps/d/u/0/viewer?mid=1jaaxNriWkeGPzFJC4e--k0CU2QyBFx8&ll=47.453898687406785%2C19.01940665000001&z=13', '_blank');
ย ย ย ย });

ย ย ย ย // ๐ MรDOSรTOTT: Sรบgรณ esemรฉnykezelลk
ย ย ย ย if (helpButton) {
ย ย ย ย ย ย helpButton.addEventListener('click', showHelpMessage);
s ย ย ย }

ย ย ย ย if (helpNextButton) {
ย ย ย ย ย ย helpNextButton.addEventListener('click', nextHelpStep);
ย ย ย ย }
ย ย ย ยย
ย ย ย ย // รJ: Bezรกrรกs esemรฉnykezelล
ย ย ย ย if (helpCloseButton) {
ย ย ย ย ย ย helpCloseButton.addEventListener('click', closeHelpModal);
ย ย ย ย }


ย ย ย ย window.onload = () => {
ย ย ย ย ย ย loadProgress();ย
ย ย ย ย ย ย showStoryPart();
ย ย ย ย };
ย ย </script>
</body>
</html>
